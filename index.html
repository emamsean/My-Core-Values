<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Planning Advisor</title>
    <style>
        /* Minimal Tailwind CSS for used classes */
        .bg-gray-100 { background-color: #f3f4f6; }
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .justify-center { justify-content: center; }
        .items-start { align-items: flex-start; }
        .p-4 { padding: 1rem; }
        .w-full { width: 100%; }
        .max-w-4xl { max-width: 56rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .bg-white { background-color: #fff; }
        .p-6 { padding: 1.5rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .font-bold { font-weight: 700; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .text-center { text-align: center; }
        .block { display: block; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .font-medium { font-weight: 500; }
        .mb-1 { margin-bottom: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .border { border-width: 1px; border-color: #e5e7eb; }
        .rounded { border-radius: 0.25rem; }
        .bg-blue-500 { background-color: #3b82f6; }
        .text-white { color: #fff; }
        .hover\:bg-blue-600:hover { background-color: #2563eb; }
        .mr-2 { margin-right: 0.5rem; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .font-semibold { font-weight: 600; }
        .text-gray-600 { color: #4b5563; }
        .text-md { font-size: 1rem; line-height: 1.5rem; }
        .mt-2 { margin-top: 0.5rem; }
        .list-disc { list-style-type: disc; }
        .pl-5 { padding-left: 1.25rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .capitalize { text-transform: capitalize; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/react@18.3.1/umd/react.production.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.3.1/umd/react-dom.production.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.24.7/babel.min.js" type="text/javascript"></script>
</head>
<body class="bg-gray-100 min-h-screen flex justify-center items-start p-4">
    <div id="root" class="w-full max-w-4xl"></div>
    <script type="text/babel">
        const mockData = {
            "Seoul": {
                attractions: [
                    { name: "Gyeongbokgung Palace", address: "161 Sajik-ro, Jongno-gu, Seoul", lat: 37.5759, lon: 126.9751, description: "Historic Joseon dynasty palace with traditional architecture.", station: "Gyeongbokgung Station", line: "Line 3" },
                    { name: "N Seoul Tower", address: "105 Namsangongwon-gil, Yongsan-gu, Seoul", lat: 37.5512, lon: 126.9882, description: "Iconic tower with panoramic city views.", station: "Myeongdong Station", line: "Line 4" }
                ],
                dining: [
                    { name: "Tosokchon Samgyetang", address: "5 Jahamun-ro 5-gil, Jongno-gu, Seoul", lat: 37.5748, lon: 126.9752, description: "Famous for ginseng chicken soup.", station: "Gyeongbokgung Station", line: "Line 3" },
                    { name: "Mapo BBQ", address: "24 Nonhyeon-ro 153-gil, Gangnam-gu, Seoul", lat: 37.5175, lon: 127.0286, description: "Authentic Korean BBQ experience.", station: "Hongik University Station", line: "Line 2" }
                ],
                activities: [
                    { name: "Han River Park", address: "Yeouido-dong, Yeongdeungpo-gu, Seoul", lat: 37.5291, lon: 126.9637, description: "Scenic park for cycling and picnics.", station: "Yeouido Station", line: "Line 5" }
                ],
                shopping: [
                    { name: "Myeongdong Market", address: "Myeongdong-gil, Jung-gu, Seoul", lat: 37.5633, lon: 126.9751, description: "Vibrant street market for cosmetics and fashion.", station: "Myeongdong Station", line: "Line 4" }
                ],
                familyFriendly: [
                    { name: "Lotte World", address: "240 Olympic-ro, Songpa-gu, Seoul", lat: 37.5111, lon: 127.0982, description: "Popular amusement park with rides and shows.", station: "Jamsil Station", line: "Line 2" }
                ]
            },
            "Shanghai": {
                attractions: [
                    { name: "The Bund", address: "Zhongshan East 1st Rd, Huangpu, Shanghai", lat: 31.2402, lon: 121.4903, description: "Historic waterfront with colonial buildings.", station: "East Nanjing Road Station", line: "Line 2" },
                    { name: "Yu Garden", address: "279 Yuyuan Old St, Huangpu, Shanghai", lat: 31.2277, lon: 121.4924, description: "Classical Chinese garden with pavilions and ponds.", station: "Yuyuan Garden Station", line: "Line 10" }
                ],
                dining: [
                    { name: "Din Tai Fung", address: "168 Lujiazui Ring Rd, Pudong, Shanghai", lat: 31.2376, lon: 121.5032, description: "World-famous xiao long bao dumplings.", station: "Lujiazui Station", line: "Line 2" },
                    { name: "Yang's Fry Dumplings", address: "97 Huanghe Rd, Huangpu, Shanghai", lat: 31.2413, lon: 121.4739, description: "Crispy and savory fried dumplings.", station: "People's Square Station", line: "Line 2" }
                ],
                activities: [
                    { name: "Zhujiajiao Water Town", address: "Zhujiajiao, Qingpu, Shanghai", lat: 31.1123, lon: 121.0570, description: "Ancient water town with canals and bridges.", station: "Zhujiajiao Station", line: "Line 17" }
                ],
                shopping: [
                    { name: "Nanjing Road", address: "Nanjing Rd Pedestrian St, Huangpu, Shanghai", lat: 31.2349, lon: 121.4750, description: "Bustling shopping street with global brands.", station: "East Nanjing Road Station", line: "Line 2" }
                ],
                familyFriendly: [
                    { name: "Shanghai Disneyland", address: "310 Huangzhao Rd, Pudong, Shanghai", lat: 31.1440, lon: 121.6570, description: "Magical theme park for all ages.", station: "Disneyland Station", line: "Line 11" }
                ]
            },
            "Hong Kong": {
                attractions: [
                    { name: "Victoria Peak", address: "Peak Rd, Hong Kong", lat: 22.2759, lon: 114.1455, description: "Stunning city and harbor views from the highest point.", station: "Central Station", line: "Island Line" },
                    { name: "Temple Street Night Market", address: "Temple St, Yau Ma Tei, Hong Kong", lat: 22.3107, lon: 114.1702, description: "Vibrant night market with street food and goods.", station: "Jordan Station", line: "Tsuen Wan Line" }
                ],
                dining: [
                    { name: "DimDimSum Dim Sum Restaurant", address: "112 Tung Choi St, Mong Kok, Hong Kong", lat: 22.3214, lon: 114.1697, description: "Traditional dim sum dishes.", station: "Mong Kok Station", line: "Tsuen Wan Line" },
                    { name: "Tim Ho Wan", address: "2-20 Kwong Wa St, Mong Kok, Hong Kong", lat: 22.3160, lon: 114.1717, description: "Michelin-starred dim sum at affordable prices.", station: "Mong Kok Station", line: "Tsuen Wan Line" }
                ],
                activities: [
                    { name: "Lantau Island", address: "Lantau Island, Hong Kong", lat: 22.2637, lon: 113.9518, description: "Home to the Big Buddha and scenic hikes.", station: "Tung Chung Station", line: "Tung Chung Line" }
                ],
                shopping: [
                    { name: "Causeway Bay", address: "Hennessy Rd, Causeway Bay, Hong Kong", lat: 22.2795, lon: 114.1849, description: "High-end and local shopping district.", station: "Causeway Bay Station", line: "Island Line" }
                ],
                familyFriendly: [
                    { name: "Hong Kong Disneyland", address: "Lantau Island, Hong Kong", lat: 22.3129, lon: 114.0412, description: "Family-friendly theme park with rides and shows.", station: "Disneyland Resort Station", line: "Disneyland Resort Line" }
                ]
            }
        };

        const hotelData = {
            "Seoul": {
                name: "Westin Josun Seoul",
                address: "106 Sogong-ro, Jung-gu, Seoul",
                station: "Myeongdong Station",
                line: "Line 4",
                lat: 37.565804,
                lon: 126.975147
            },
            "Shanghai": {
                name: "The Ritz-Carlton Shanghai, Pudong",
                address: "8 Century Ave, Pudong, Shanghai",
                station: "Lujiazui Station",
                line: "Line 2",
                lat: 31.235929,
                lon: 121.505904
            },
            "Hong Kong": {
                name: "Grand Hyatt Hong Kong",
                address: "1 Harbour Rd, Wan Chai, Hong Kong",
                station: "Wan Chai Station",
                line: "Island Line",
                lat: 22.280683,
                lon: 114.174950
            }
        };

        const getMetroDirections = (city, destination) => {
            const hotel = hotelData[city] || { station: "Unknown Station", line: "Unknown Line" };
            const destinationItem = Object.values(mockData[city] || {}).flat().find(item => item.name === destination);
            const destStation = destinationItem?.station || "Unknown Station";
            const destLine = destinationItem?.line || "Unknown Line";
            if (hotel.station === "Unknown Station" || destStation === "Unknown Station") {
                return [`Enter a valid city to get directions from ${hotel.name || "your hotel"}.`];
            }
            if (hotel.station === destStation) {
                return [`Walk from ${hotel.station} to ${destination} (same station, approximately 5-10 minutes).`];
            }
            if (hotel.line === destLine) {
                return [
                    `Take ${city} ${hotel.line} from ${hotel.station} to ${destStation}.`,
                    `Exit at ${destStation} and walk to ${destination} (approximately 5-10 minutes).`
                ];
            }
            const transferStation = {
                "Seoul": "Seoul Station",
                "Shanghai": "People's Square Station",
                "Hong Kong": "Central Station"
            }[city] || "a transfer station";
            return [
                `Take ${city} ${hotel.line} from ${hotel.station} to ${transferStation}.`,
                `Transfer to ${destLine} and continue to ${destStation}.`,
                `Exit at ${destStation} and walk to ${destination} (approximately 5-10 minutes).`
            ];
        };

        const groupByProximity = (items, hotelLat, hotelLon) => {
            const groups = {};
            items.forEach(item => {
                const distance = Math.sqrt(Math.pow(item.lat - hotelLat, 2) + Math.pow(item.lon - hotelLon, 2));
                const area = distance < 0.02 ? "Near Hotel" : "Further Out";
                if (!groups[area]) groups[area] = [];
                groups[area].push(item);
            });
            return groups;
        };

        const App = () => {
            const [city, setCity] = React.useState("");
            const [hotelAddress, setHotelAddress] = React.useState("");
            const [view, setView] = React.useState("categorized");
            const [recommendations, setRecommendations] = React.useState(null);

            React.useEffect(() => {
                if (city && hotelData[city]) {
                    setHotelAddress(hotelData[city].address);
                } else {
                    setHotelAddress("");
                }
            }, [city]);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (mockData[city]) {
                    setRecommendations(mockData[city]);
                } else {
                    alert("Please select a city: Seoul, Shanghai, or Hong Kong.");
                    setCity("");
                    setRecommendations(null);
                }
            };

            const renderRecommendation = (item, type) => (
                <div key={item.name} className="bg-white p-4 rounded-lg shadow mb-4">
                    <h3 className="text-lg font-semibold">{item.name}</h3>
                    <p className="text-sm text-gray-600">{item.address}</p>
                    <p className="text-sm">{item.description}</p>
                    <h4 className="text-md font-medium mt-2">Metro Directions from {hotelData[city]?.name || "Hotel"}:</h4>
                    <ul className="list-disc pl-5 text-sm">
                        {getMetroDirections(city, item.name).map((step, idx) => (
                            <li key={idx}>{step}</li>
                        ))}
                    </ul>
                </div>
            );

            const renderCategorizedView = () => (
                <div>
                    {['attractions', 'dining', 'activities', 'shopping', 'familyFriendly'].map(type => (
                        recommendations[type]?.length > 0 && (
                            <div key={type}>
                                <h2 className="text-xl font-bold capitalize mt-6 mb-2">{type.replace(/([A-Z])/g, ' $1')}</h2>
                                {recommendations[type].map(item => renderRecommendation(item, type))}
                            </div>
                        )
                    ))}
                </div>
            );

            const renderProximityView = () => {
                const hotel = hotelData[city] || { lat: 0, lon: 0 };
                const allItems = Object.values(recommendations).flat();
                const grouped = groupByProximity(allItems, hotel.lat, hotel.lon);
                return (
                    <div>
                        {Object.entries(grouped).map(([area, items]) => (
                            <div key={area}>
                                <h2 className="text-xl font-bold mt-6 mb-2">{area}</h2>
                                {items.map(item => renderRecommendation(item))}
                            </div>
                        ))}
                    </div>
                );
            };

            return (
                <div className="bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl mx-auto">
                    <h1 className="text-2xl font-bold mb-4 text-center">Travel Planning Advisor</h1>
                    <form onSubmit={handleSubmit} className="mb-6">
                        <div className="mb-4">
                            <label className="block text-sm font-medium mb-1">City</label>
                            <select
                                value={city}
                                onChange={(e) => setCity(e.target.value)}
                                className="w-full p-2 border rounded"
                            >
                                <option value="">Select a city</option>
                                <option value="Seoul">Seoul</option>
                                <option value="Shanghai">Shanghai</option>
                                <option value="Hong Kong">Hong Kong</option>
                            </select>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium mb-1">Hotel Address</label>
                            <input
                                type="text"
                                value={hotelAddress}
                                readOnly
                                className="w-full p-2 border rounded bg-gray-100"
                            />
                        </div>
                        <button type="submit" className="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600">
                            Generate Plan
                        </button>
                    </form>
                    <div className="flex justify-center mb-4">
                        <button
                            onClick={() => setView("categorized")}
                            className={`mr-2 p-2 rounded ${view === "categorized" ? "bg-blue-500 text-white" : "bg-gray-200"}`}
                        >
                            Categorized View
                        </button>
                        <button
                            onClick={() => setView("proximity")}
                            className={`p-2 rounded ${view === "proximity" ? "bg-blue-500 text-white" : "bg-gray-200"}`}
                        >
                            Proximity View
                        </button>
                    </div>
                    {recommendations && (
                        view === "categorized" ? renderCategorizedView() : renderProximityView()
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
